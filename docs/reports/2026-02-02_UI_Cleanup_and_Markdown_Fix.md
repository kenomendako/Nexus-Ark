# UIクリーンアップと「文字置き換え」不具合修正 レポート

**日付:** 2026-02-02  
**ブランチ:** `fix/ui-and-text-replacement`  
**ステータス:** ✅ 完了

---

## 問題の概要

INBOXにあったUI表示の不整合（タブ名、不要な設定残骸）の解消と、チャット支援ツール「文字置き換え」適用時にマークダウン（太字など）が解除されてしまう不具合の修正を行いました。

---

## 修正内容

1.  **UIタブの整理**: 
    - 「記憶・メモ・指示」タブを、実情に合わせて「記憶・ノート・知識」に名称変更。
    - 同タブ内に残っていた「エンベディング設定（移行案内）」のMarkdownセクションを削除し、UIをクリーンアップ。
2.  **マークダウン描画の修正**:
    - 文字置き換え機能（スクリーンショットモード）が有効な際、テキストを `<div>` で囲んでいたことが原因でGradioのマークダウンレンダラがスキップされていました。
    - `<div>` 囲みを廃止し、Markdown準拠の改行処理（末尾2スペース）に変更することで、太字、引用、コードブロックなどの装飾が正しく維持されるようにしました。

---

## 変更したファイル

- [nexus_ark.py](file:///home/baken/nexus_ark/nexus_ark.py) - タブ名の変更と不要な設定セクションの削除。
- [ui_handlers.py](file:///home/baken/nexus_ark/ui_handlers.py) - 文字置き換え時のレンダリングロジック修正。

---

## 検証結果

- [x] アプリ起動確認：正常起動を確認。
- [x] 機能動作確認：
    - タブ名が変更されていることを確認。
    - 文字置き換え実行後も `**太字**` や `> 引用` が正しく表示されることを確認。
- [x] 副作用チェック：`validate_wiring.py` を実行。既存の警告（RAG再索引化など）はありますが、今回の修正による新規エラーはないことを確認しました。

---

## 残課題（あれば）

なし
