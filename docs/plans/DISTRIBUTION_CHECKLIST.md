# 📦 Nexus Ark 配布チェックリスト

配布準備および今後のリリースで必要な作業をまとめた永続的なドキュメントです。

---

## 🔧 配布前の必須作業

### 1. バージョン更新
- [x] `constants.py` の `APP_VERSION` を更新
- [x] `version.json` の `version` と `release_date` を更新

### 2. 開発ファイルのクリーンアップ
- [x] `pyproject.toml` への依存関係移行 ✅
- [x] `requirements.txt` の削除（uv移行完了後）
- [x] `start.sh` を uv 使用に更新（自動インストール機能付き）

### 3. 仕様書の更新
- [x] `docs/NEXUS_ARK_SPECIFICATION.md` を現在の実装に合わせて更新
  - ルームごとのCSSテーマ設定
  - Arousalベース記憶システム
  - 内省機能（目標・未解決の問い・夢日記）
  - 複数プロバイダ対応
  - 月次ログ分割管理
  - ウォッチリスト巡回、チェス、ログインポート等

### 4. 配布用サンプルペルソナ（オリヴェ）の整備
場所: `assets/sample_persona/Olivie/`

- [x] `room_config.json` にテーマ設定を反映
- [x] `rag_data/` に仕様書のRAGインデックスを事前構築 ✅ (29チャンク, 356KB)
- [x] `SystemPrompt.txt` の内容確認 ✅
- [x] `log.txt` の初期内容確認 ✅


### 5. ビルド & 検証
- [x] `python tools/build_release.py` を実行
- [x] クリーン環境での起動テスト
    - [x] Windows環境でのRAG初期化とログ重複バグの解消確認 (2026-02-08)
    - [x] Start.batでのuv自動インストール・アプリ起動確認 (2026-02-08)
- [x] 配布パッケージ構成の最終確認 (2026-02-09)
    - [x] ルートへのREADME.mdと仕様書の配置
    - [x] READMEの内容統一（Grounded Tone & 免責事項）

...

### Phase 3: 将来課題 (今回の配布では対応不要)
| 項目 | 説明 | 状態 |
|------|------|------|
| [ ] TUF/tufup 更新システム | 署名ベースの安全な差分更新 | ⏭️ 次回以降 |
| [ ] 自動更新チェック | 起動時に新バージョン通知 | ⏭️ 次回以降 |
| [ ] Pre-built Wheel Dispatcher | GPU自動検出・最適化 | ⏭️ 次回以降 |
| [ ] Windows ポータブル対応 | Import再順序化ハック | ⏭️ 次回以降 |

---

## 📝 仕様書更新ガイド

仕様書はオリヴェがユーザーの質問に答えるための知識ベースです。

### 更新時の注意点
1. **ユーザー視点で書く**: 「何ができるか」「どう使うか」を重視
2. **CHANGELOGを参照**: 未記載機能の確認

### 追記が必要なセクション案
- ルームテーマ設定
- 記憶の重要度（Arousal）システム
- 内省機能
- 複数AIプロバイダ対応
- ログ管理の詳細

---

## 📎 関連ドキュメント

- [配布システム計画](distribution_system_plan.md)
- [配布調査レポート](../research/配布調査.md)
