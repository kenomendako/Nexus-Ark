# 📋 Nexus Ark タスクリスト

## 🏁 Release 1.0 (MVP) 目標
2026年2月中の安定版リリースを目指します。

## 🔴 最優先: リリースブロッカー（記憶・内省の正常化・UI不具合）

ルシアン（エージェント）の記憶の整合性と、システムプロンプトの肥大化によるコスト増を解決します。また、報告されたUIの不整合と不具合を修正します。

- [x] [「### 記憶しているエンティティ一覧」をシステムプロンプトから抜く]
  - 詳細: 記憶想起に組み込んだので不要。ペンディングメッセージは分離して継続。
  - 優先度: 🔴高 
- [x] **研究ノート・創作ノートの整理** <!-- id: 803 -->
  - 詳細: ルームフォルダ直置きのノート類を整理し、分割・アーカイブ機能を実装。ツールパスの修正。
  - 状況: 完了。自動アーカイブ機能とUI閲覧機能を実装。



- [x] **推定入力トークン数の計算精度の改善** <!-- id: 802 -->
  - 詳細: 入力(推定)が実入力より大幅に大きく計算される不具合の調査と修正
  - 状況: 完了。推定値と実入力の乖離を解消し、安全なマージンを確保。

- [x] **睡眠時のRAG索引更新でのAPIキーローテーション不具合修正** <!-- id: 804 -->
  - 詳細: 睡眠時のRAG更新で429エラーが発生した際、無限リトライに陥り、再起動まで自律行動が不能になる問題を修正。
  - 状況: 完了。
- [x] **チャットログの月次分割管理の実装** <!-- id: 805 -->
  - 詳細: `log.txt` を月次単位 (`logs/YYYY-MM.txt`) で分割。過去ログのプレビュー・検索・編集機能も実装。
  - 状況: 完了。 ([レポート](reports/2026-02-03_segmented_chat_log.md), [追加レポート](reports/2026-02-03_log_management_ui.md))

## 🟠 優先: リリース準備・配布基盤

一般配布に向けた基盤と、動作の透明性を確保します。

- [ ] **配布システムの最新化 (Pinokio / uv 対応)**
  - [ ] `docs/research/配布調査.md` に基づく最新配布フローの反映
  - [ ] `version.json` によるバージョン管理の実装 <!-- id: 748 -->
  - [ ] `update_manager.py` の実装とUI統合 <!-- id: 749, 751 -->
- [ ] **ツール使用ログの常時記録**
  - [ ] 自律行動時・通常応答時だけでなく、全シーンでのツール使用をログに記録 <!-- id: 337 -->
- [ ] **Webhook管理UIの整合性確認・修正** <!-- id: 353 -->
- [ ] **内部処理モデルの設定のプロバイダ混成対応** <!-- id: 357 -->

## 🟡 中長期: Beyond 1.0 (リリース後)

- [ ] 英語対応（UI・メニューの多言語化） <!-- id: 277 -->
- [ ] 創作ノートのRAG化 <!-- id: 296 -->
- [ ] アラームの日付指定・期間指定・祝日除外 <!-- id: 665 -->
- [ ] AIペルソナが画像を生成した際、本人がその画像を確認できるようにする <!-- id: 801 -->
  - 詳細: 生成された画像のパスをAPIパーツとして含め、AIが自分の描いた絵を「見る」ことができるようにする
- [ ] 年次反省（Annual Reflection）の追加 <!-- id: 535 -->
- [ ] 忘却機能（ガベージコレクション）の設計 <!-- id: 675 -->
- [ ] スーパーツール化によるトークン削減の検討 <!-- id: 597 -->

---
- [x] **APIコストの最適化（スリム化）** ([レポート](reports/2026-02-02_API_Cost_Optimization.md)) ✅
- [x] **UIクリーンアップと「文字置き換え」不具合修正** ([レポート](reports/2026-02-02_UI_Cleanup_and_Markdown_Fix.md)) ✅
- [x] **APIキーローテーションの最適化と個別設定リセットの修正** ([レポート](reports/2026-02-02_Fix_Settings_and_API_Rotation.md)) ✅
- [x] **Arousal 整合性改善と UI クリーンアップ** ([レポート](reports/2026-02-02_SessionArousal_Fixes.md)) ✅
- [x] **表情管理システムの洗練とプロンプト同期の改善** ([レポート](reports/2026-02-02_refine_avatar_expressions.md)) ✅
- [x] **記憶・内省システムの緊急修正**（バグ修正・ロジック刷新） ✅
- [x] **応答再生成時の添付ファイル復元** ([レポート](reports/2026-02-01_regeneration_attachment_fix.md)) ✅
- [x] **内省・記憶システムの安定化とルシアンの記憶修復** ([レポート](reports/2026-02-01_memory_stabilization.md)) ✅
- [x] **APIキーローテーションの信頼性向上**（無料キー優先・永続化） ✅
- [x] **RAG モデル不整合対策と内部処理モデルの最適化** ✅
- [x] **エンティティ記憶の洗練（常体統一・重複排除）** ✅
- [x] **APIキーローテーションの高速化（429 発生時の冗長リトライ削減）** ✅
- [x] **研究ノート・創作ノートの整理** ([レポート](reports/2026-02-02_implement_note_organization.md)) ✅
- [ ] **RAG検索時のAPIキーローテーション不具合修正** <!-- id: 806 -->
  - 詳細: 通常チャットのRAG検索でAPIキーローテーションが効いていない問題を調査・修正。
  - 状況: 調査中。
---
## 🗄️ アーカイブ
[全タスク履歴・アーカイブはこちら](ARCHIVE_TASK_LIST.md)
